@model VIPS.Models.ViewModels.Search.SearchViewModel

@{
    ViewData["Title"] = "Search";
}

<!DOCTYPE html>
<html>
<head>
    
</head>
<body>

    <h1>Search</h1>

    <form method="get" asp-action="SearchView">
        <input type="text" name="SearchString" value="@ViewData["CurrentFilter"]" placeholder="Search...">
        <button type="submit">Search</button>

        <label for="sortOrder">Filter:</label>
        <select id="sortOrder" name="sortOrder" onchange="this.form.submit()">
            <option value="select" selected="@(Model.SortOrder == "select" ? "selected" : null)">Select</option>
            <option value="alphabetical" selected="@(Model.SortOrder == "alphabetical" ? "selected" : null)">Alphabetical (AA-)</option>
            <option value="id" selected="@(Model.SortOrder == "id" ? "selected" : null)">Sort by ID</option>
            <option value="close_exp" selected="@(Model.SortOrder == "close_exp" ? "selected" : null)">Closest to Expiration</option>
            <option value="far_exp" selected="@(Model.SortOrder == "far_exp" ? "selected" : null)">Furthest from Expiration</option>
        </select>

        <p style="display:inline-block; margin-left:10px;">Contracts on Page: @Model.TotalContracts</p> <!-- Total number of contracts within the search -->
        
    </form>
    
    <table class="table">
        <thead>
            <tr>
                <th>ContractID</th>
                <th>CreatedOn</th>
                <th>ContractName</th>
                <th>Owner</th>
                <th>StageName</th>
                <th>UpdatedOn</th>
                <th>AgencyName</th>
                <th>City</th>
                <th>Department</th>
                <th>FacultyInitiator</th>
                <th>Renewal</th>
                <th>State</th>
                <th>Year</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var contract in Model.ContractList)
            {
                <tr>
                    <td><a asp-controller="Search" asp-action="Contract" asp-route-id="@contract.ContractID">@contract.ContractID</a></td>
                    <td>@contract.CreatedOn</td>
                    <td>@contract.ContractName</td>
                    <td>@contract.Owner</td>
                    <td>@contract.StageName</td>
                    <td>@contract.UpdatedOn</td>
                    <td>@contract.AgencyName</td>
                    <td>@contract.City</td>
                    <td>@contract.Department</td>
                    <td>@contract.FacultyInitiator</td>
                    <td>@contract.Renewal</td>
                    <td>@contract.State</td>
                    <td>@contract.Year</td>
                </tr>
            }
        </tbody>
    </table>

</body>
</html>